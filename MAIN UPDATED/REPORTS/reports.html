<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reports - CRM Pro</title>
    <link rel="stylesheet" href="reports.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header / Navigation -->
        <header class="header">
            <div class="header-content">
                <div class="header-left">
                    <div class="logo">
                        <i class="fas fa-chart-line"></i>
                        <span>CRM Pro</span>
                    </div>
                    <div class="search-container">
                        <i class="fas fa-search"></i>
                        <input type="search" class="search-input" placeholder="Search reports..." onkeyup="performSearch(this.value)">
                    </div>
                    <nav class="breadcrumb">
                        <a href="../MAIN_PAGE/index.html" class="breadcrumb-link">
                            <i class="fas fa-tachometer-alt"></i> Dashboard
                        </a>
                        <a href="#" class="breadcrumb-link">
                            <i class="fas fa-chart-bar"></i> Reports
                        </a>
                    </nav>
                </div>
                
                <div class="header-right">
                    
                    <div class="notifications" onclick="toggleNotifications()">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>Notification
                    </div>
                    
                    <div class="user-profile" onclick="toggleUserMenu()">
                        <img src="https://via.placeholder.com/40x40/667eea/ffffff?text=JD" alt="User" class="user-avatar">
                        <span class="user-name">John Doe</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
            </div>
        </header>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h3><i class="fas fa-bookmark"></i> Quick Access</h3>
                <button class="sidebar-toggle" onclick="toggleSidebar()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="sidebar-section">
                <h4>Saved Reports</h4>
                <div class="saved-reports" id="savedReportsList">
                    <div class="saved-report-item" onclick="loadSavedReport(1)">
                        <i class="fas fa-chart-line"></i>
                        <span>Monthly Sales Performance</span>
                        <button class="delete-saved-report" onclick="deleteSavedReport(1, event)">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <div class="saved-report-item" onclick="loadSavedReport(2)">
                        <i class="fas fa-chart-pie"></i>
                        <span>Lead Source Analysis</span>
                        <button class="delete-saved-report" onclick="deleteSavedReport(2, event)">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <div class="saved-report-item" onclick="loadSavedReport(3)">
                        <i class="fas fa-chart-bar"></i>
                        <span>Conversion Funnel</span>
                        <button class="delete-saved-report" onclick="deleteSavedReport(3, event)">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="sidebar-section">
                <h4>Favorite Filters</h4>
                <div class="favorite-filters" id="favoriteFiltersList">
                    <div class="filter-preset" onclick="applyFilterPreset('q4-2024')">
                        <i class="fas fa-filter"></i>
                        <span>Q4 2024 Sales</span>
                    </div>
                    <div class="filter-preset" onclick="applyFilterPreset('high-value-deals')">
                        <i class="fas fa-star"></i>
                        <span>High Value Deals</span>
                    </div>
                </div>
            </div>
            
            <div class="sidebar-section">
                <h4>Recent Activity</h4>
                <div class="recent-activity">
                    <div class="activity-item">
                        <span>Report generated</span>
                        <small>2 hours ago</small>
                    </div>
                    <div class="activity-item">
                        <span>Filter saved</span>
                        <small>Yesterday</small>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <!-- Report Header / Filter Panel -->
            <section class="filter-panel">
                <div class="filter-header">
                    <div class="report-title-section">
                        <h1 class="report-title" id="reportTitle">Monthly Sales Performance</h1>
                        <button class="edit-title-btn" onclick="editReportTitle()">
                            <i class="fas fa-edit"></i>
                        </button>
                    </div>
                    
                    <div class="filter-actions">
                        <button class="btn-secondary" onclick="resetFilters()">
                            <i class="fas fa-undo"></i> Reset Filters
                        </button>
                        <button class="btn-secondary" onclick="saveFilterPreset()">
                            <i class="fas fa-save"></i> Save Preset
                        </button>
                        <button class="btn-primary" onclick="applyFilters()">
                            <i class="fas fa-play"></i> Apply Filters
                        </button>
                    </div>
                </div>
                
                <div class="filter-grid">
                    <div class="filter-group">
                        <label>Date Range</label>
                        <div class="date-range-selector">
                            <div class="date-tabs">
                                <button class="date-tab active" data-range="today" onclick="selectDateRange('today')">Today</button>
                                <button class="date-tab" data-range="week" onclick="selectDateRange('week')">This Week</button>
                                <button class="date-tab" data-range="month" onclick="selectDateRange('month')">This Month</button>
                                <button class="date-tab" data-range="custom" onclick="selectDateRange('custom')">Custom</button>
                            </div>
                            <div class="custom-date-inputs" id="customDateInputs" style="display: none;">
                                <input type="date" id="startDate" class="form-input">
                                <span>to</span>
                                <input type="date" id="endDate" class="form-input">
                            </div>
                        </div>
                    </div>
                    
                    <div class="filter-group">
                        <label>Contact Owner / Sales Rep</label>
                        <select class="form-select" id="ownerFilter">
                            <option value="">All Owners</option>
                            <option value="john-smith">John Smith</option>
                            <option value="sarah-johnson">Sarah Johnson</option>
                            <option value="mike-chen">Mike Chen</option>
                            <option value="lisa-brown">Lisa Brown</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label>Region / Territory</label>
                        <select class="form-select" id="regionFilter">
                            <option value="">All Regions</option>
                            <option value="north-america">North America</option>
                            <option value="europe">Europe</option>
                            <option value="asia-pacific">Asia Pacific</option>
                            <option value="latin-america">Latin America</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label>Product / Service</label>
                        <select class="form-select" id="productFilter">
                            <option value="">All Products</option>
                            <option value="enterprise-software">Enterprise Software</option>
                            <option value="consulting">Consulting Services</option>
                            <option value="training">Training Services</option>
                            <option value="support">Support Services</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label>Deal Stage</label>
                        <select class="form-select" id="stageFilter">
                            <option value="">All Stages</option>
                            <option value="lead">Lead</option>
                            <option value="prospect">Prospect</option>
                            <option value="proposal">Proposal</option>
                            <option value="negotiation">Negotiation</option>
                            <option value="closed-won">Closed Won</option>
                            <option value="closed-lost">Closed Lost</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label>Industry / Category</label>
                        <select class="form-select" id="industryFilter">
                            <option value="">All Industries</option>
                            <option value="technology">Technology</option>
                            <option value="healthcare">Healthcare</option>
                            <option value="finance">Finance</option>
                            <option value="manufacturing">Manufacturing</option>
                            <option value="retail">Retail</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label>Report Type</label>
                        <select class="form-select" id="reportTypeFilter" onchange="changeReportType(this.value)">
                            <option value="summary">Summary</option>
                            <option value="detailed">Detailed</option>
                            <option value="comparison">Comparison</option>
                            <option value="forecast">Forecast</option>
                        </select>
                    </div>
                </div>
            </section>

            <!-- KPI Summary Cards -->
            <section class="kpi-section">
                <div class="kpi-card leads">
                    <div class="kpi-icon">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <div class="kpi-content">
                        <div class="kpi-value" id="totalLeads">1,247</div>
                        <div class="kpi-label">Total Leads Generated</div>
                        <div class="kpi-change positive">
                            <i class="fas fa-arrow-up"></i> +18% from last month
                        </div>
                    </div>
                    <div class="kpi-chart">
                        <canvas id="leadsChart" width="80" height="40"></canvas>
                    </div>
                </div>
                
                <div class="kpi-card deals">
                    <div class="kpi-icon">
                        <i class="fas fa-handshake"></i>
                    </div>
                    <div class="kpi-content">
                        <div class="kpi-value" id="dealsCreated">143</div>
                        <div class="kpi-label">Deals Created</div>
                        <div class="kpi-change positive">
                            <i class="fas fa-arrow-up"></i> +12% from last month
                        </div>
                    </div>
                    <div class="kpi-chart">
                        <canvas id="dealsChart" width="80" height="40"></canvas>
                    </div>
                </div>
                
                <div class="kpi-card closed-deals">
                    <div class="kpi-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="kpi-content">
                        <div class="kpi-value" id="dealsClosed">67</div>
                        <div class="kpi-label">Deals Closed</div>
                        <div class="kpi-change positive">
                            <i class="fas fa-arrow-up"></i> +23% from last month
                        </div>
                    </div>
                    <div class="kpi-chart">
                        <canvas id="closedDealsChart" width="80" height="40"></canvas>
                    </div>
                </div>
                
                <div class="kpi-card conversion">
                    <div class="kpi-icon">
                        <i class="fas fa-percentage"></i>
                    </div>
                    <div class="kpi-content">
                        <div class="kpi-value" id="conversionRate">24.8%</div>
                        <div class="kpi-label">Conversion Rate</div>
                        <div class="kpi-change positive">
                            <i class="fas fa-arrow-up"></i> +3.2% from last month
                        </div>
                    </div>
                    <div class="kpi-chart">
                        <canvas id="conversionChart" width="80" height="40"></canvas>
                    </div>
                </div>
                
                <div class="kpi-card revenue">
                    <div class="kpi-icon">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="kpi-content">
                        <div class="kpi-value" id="totalRevenue">$428,500</div>
                        <div class="kpi-label">Total Revenue</div>
                        <div class="kpi-change positive">
                            <i class="fas fa-arrow-up"></i> +31% from last month
                        </div>
                    </div>
                    <div class="kpi-chart">
                        <canvas id="revenueChart" width="80" height="40"></canvas>
                    </div>
                </div>
                
                <div class="kpi-card avg-deal">
                    <div class="kpi-icon">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <div class="kpi-content">
                        <div class="kpi-value" id="avgDealValue">$6,395</div>
                        <div class="kpi-label">Average Deal Value</div>
                        <div class="kpi-change positive">
                            <i class="fas fa-arrow-up"></i> +7% from last month
                        </div>
                    </div>
                    <div class="kpi-chart">
                        <canvas id="avgDealChart" width="80" height="40"></canvas>
                    </div>
                </div>
                
                <div class="kpi-card win-rate">
                    <div class="kpi-icon">
                        <i class="fas fa-target"></i>
                    </div>
                    <div class="kpi-content">
                        <div class="kpi-value" id="winRate">67.2%</div>
                        <div class="kpi-label">Win Rate</div>
                        <div class="kpi-change positive">
                            <i class="fas fa-arrow-up"></i> +5.1% from last month
                        </div>
                    </div>
                    <div class="kpi-chart">
                        <canvas id="winRateChart" width="80" height="40"></canvas>
                    </div>
                </div>
                
                <div class="kpi-card pipeline">
                    <div class="kpi-icon">
                        <i class="fas fa-stream"></i>
                    </div>
                    <div class="kpi-content">
                        <div class="kpi-value" id="pipelineValue">$1.2M</div>
                        <div class="kpi-label">Pipeline Value</div>
                        <div class="kpi-change positive">
                            <i class="fas fa-arrow-up"></i> +15% from last month
                        </div>
                    </div>
                    <div class="kpi-chart">
                        <canvas id="pipelineChart" width="80" height="40"></canvas>
                    </div>
                </div>
            </section>

            <!-- Data Visualization Area -->
            <section class="visualization-section">
                <div class="section-header">
                    <h3><i class="fas fa-chart-area"></i> Data Visualization</h3>
                    <div class="chart-controls">
                        <select class="form-select" id="chartTypeSelector" onchange="changeChartType(this.value)">
                            <option value="bar">Bar Chart</option>
                            <option value="line">Line Chart</option>
                            <option value="pie">Pie Chart</option>
                            <option value="doughnut">Doughnut Chart</option>
                            <option value="funnel">Funnel Chart</option>
                            <option value="area">Area Chart</option>
                        </select>
                        <button class="btn-secondary" onclick="toggleFullscreenChart()">
                            <i class="fas fa-expand"></i> Fullscreen
                        </button>
                    </div>
                </div>
                
                <div class="charts-container">
                    <div class="chart-item large">
                        <div class="chart-header">
                            <h4>Revenue by Month</h4>
                            <div class="chart-actions">
                                <button class="chart-action-btn" onclick="editChartSettings('revenue-monthly')">
                                    <i class="fas fa-cog"></i>
                                </button>
                                <button class="chart-action-btn" onclick="exportChart('revenue-monthly')">
                                    <i class="fas fa-download"></i>
                                </button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="revenueMonthlyChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-item">
                        <div class="chart-header">
                            <h4>Lead Sources</h4>
                            <div class="chart-actions">
                                <button class="chart-action-btn" onclick="editChartSettings('lead-sources')">
                                    <i class="fas fa-cog"></i>
                                </button>
                                <button class="chart-action-btn" onclick="exportChart('lead-sources')">
                                    <i class="fas fa-download"></i>
                                </button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="leadSourcesChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-item">
                        <div class="chart-header">
                            <h4>Conversion Funnel</h4>
                            <div class="chart-actions">
                                <button class="chart-action-btn" onclick="editChartSettings('conversion-funnel')">
                                    <i class="fas fa-cog"></i>
                                </button>
                                <button class="chart-action-btn" onclick="exportChart('conversion-funnel')">
                                    <i class="fas fa-download"></i>
                                </button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="conversionFunnelChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-item">
                        <div class="chart-header">
                            <h4>Sales Performance by Rep</h4>
                            <div class="chart-actions">
                                <button class="chart-action-btn" onclick="editChartSettings('sales-performance')">
                                    <i class="fas fa-cog"></i>
                                </button>
                                <button class="chart-action-btn" onclick="exportChart('sales-performance')">
                                    <i class="fas fa-download"></i>
                                </button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="salesPerformanceChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Detailed Data Table -->
            <section class="data-table-section">
                <div class="section-header">
                    <h3><i class="fas fa-table"></i> Detailed Data</h3>
                    <div class="table-controls">
                        <div class="table-search">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="Search data..." onkeyup="searchTable(this.value)">
                        </div>
                        <button class="btn-secondary" onclick="toggleColumnSettings()">
                            <i class="fas fa-columns"></i> Columns
                        </button>
                        <button class="btn-secondary" onclick="exportTableData()">
                            <i class="fas fa-file-excel"></i> Export
                        </button>
                    </div>
                </div>
                
                <div class="table-container">
                    <table class="data-table" id="dataTable">
                        <thead>
                            <tr>
                                <th onclick="sortTable(0)" class="sortable">
                                    Contact Name <i class="fas fa-sort"></i>
                                </th>
                                <th onclick="sortTable(1)" class="sortable">
                                    Company <i class="fas fa-sort"></i>
                                </th>
                                <th onclick="sortTable(2)" class="sortable">
                                    Assigned Rep <i class="fas fa-sort"></i>
                                </th>
                                <th onclick="sortTable(3)" class="sortable">
                                    Deal Stage <i class="fas fa-sort"></i>
                                </th>
                                <th onclick="sortTable(4)" class="sortable">
                                    Revenue <i class="fas fa-sort"></i>
                                </th>
                                <th onclick="sortTable(5)" class="sortable">
                                    Close Date <i class="fas fa-sort"></i>
                                </th>
                                <th onclick="sortTable(6)" class="sortable">
                                    Source <i class="fas fa-sort"></i>
                                </th>
                                <th onclick="sortTable(7)" class="sortable">
                                    Created Date <i class="fas fa-sort"></i>
                                </th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="dataTableBody">
                            <!-- Table data will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <div class="table-pagination">
                    <div class="pagination-info">
                        Showing <span id="showingStart">1</span> to <span id="showingEnd">10</span> of <span id="totalRecords">150</span> records
                    </div>
                    <div class="pagination-controls">
                        <button class="pagination-btn" onclick="previousPage()" id="prevBtn">
                            <i class="fas fa-chevron-left"></i> Previous
                        </button>
                        <div class="page-numbers" id="pageNumbers">
                            <!-- Page numbers will be generated by JavaScript -->
                        </div>
                        <button class="pagination-btn" onclick="nextPage()" id="nextBtn">
                            Next <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Comparative & Forecast Sections -->
            <section class="comparison-section">
                <div class="comparison-grid">
                    <div class="comparison-card">
                        <div class="section-header">
                            <h3><i class="fas fa-balance-scale"></i> Period Comparison</h3>
                            <select class="form-select" onchange="updatePeriodComparison(this.value)">
                                <option value="month">This Month vs Last Month</option>
                                <option value="quarter">This Quarter vs Last Quarter</option>
                                <option value="year">This Year vs Last Year</option>
                            </select>
                        </div>
                        
                        <div class="comparison-content">
                            <div class="comparison-item">
                                <div class="comparison-metric">
                                    <span class="metric-label">Revenue</span>
                                    <div class="metric-values">
                                        <span class="current-value">$428,500</span>
                                        <span class="previous-value">$327,200</span>
                                        <span class="change-indicator positive">+31%</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="comparison-item">
                                <div class="comparison-metric">
                                    <span class="metric-label">Deals Closed</span>
                                    <div class="metric-values">
                                        <span class="current-value">67</span>
                                        <span class="previous-value">54</span>
                                        <span class="change-indicator positive">+24%</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="comparison-item">
                                <div class="comparison-metric">
                                    <span class="metric-label">Conversion Rate</span>
                                    <div class="metric-values">
                                        <span class="current-value">24.8%</span>
                                        <span class="previous-value">21.6%</span>
                                        <span class="change-indicator positive">+3.2%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="comparison-card">
                        <div class="section-header">
                            <h3><i class="fas fa-crown"></i> Top Performers</h3>
                            <select class="form-select" onchange="updateTopPerformers(this.value)">
                                <option value="revenue">By Revenue</option>
                                <option value="deals">By Deals Closed</option>
                                <option value="conversion">By Conversion Rate</option>
                            </select>
                        </div>
                        
                        <div class="top-performers-list">
                            <div class="performer-item">
                                <div class="performer-rank">1</div>
                                <div class="performer-info">
                                    <span class="performer-name">John Smith</span>
                                    <span class="performer-value">$125,400</span>
                                </div>
                                <div class="performer-badge gold">
                                    <i class="fas fa-trophy"></i>
                                </div>
                            </div>
                            
                            <div class="performer-item">
                                <div class="performer-rank">2</div>
                                <div class="performer-info">
                                    <span class="performer-name">Sarah Johnson</span>
                                    <span class="performer-value">$98,750</span>
                                </div>
                                <div class="performer-badge silver">
                                    <i class="fas fa-medal"></i>
                                </div>
                            </div>
                            
                            <div class="performer-item">
                                <div class="performer-rank">3</div>
                                <div class="performer-info">
                                    <span class="performer-name">Mike Chen</span>
                                    <span class="performer-value">$87,320</span>
                                </div>
                                <div class="performer-badge bronze">
                                    <i class="fas fa-award"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="comparison-card">
                        <div class="section-header">
                            <h3><i class="fas fa-crystal-ball"></i> Revenue Forecast</h3>
                            <select class="form-select" onchange="updateForecast(this.value)">
                                <option value="month">Next Month</option>
                                <option value="quarter">Next Quarter</option>
                                <option value="year">Next Year</option>
                            </select>
                        </div>
                        
                        <div class="forecast-content">
                            <div class="forecast-chart">
                                <canvas id="forecastChart"></canvas>
                            </div>
                            <div class="forecast-summary">
                                <div class="forecast-item">
                                    <span class="forecast-label">Projected Revenue</span>
                                    <span class="forecast-value">$485,600</span>
                                </div>
                                <div class="forecast-item">
                                    <span class="forecast-label">Confidence Level</span>
                                    <span class="forecast-value">85%</span>
                                </div>
                                <div class="forecast-item">
                                    <span class="forecast-label">Growth Rate</span>
                                    <span class="forecast-value">+13.3%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Export & Sharing Panel -->
            <section class="export-section">
                <div class="section-header">
                    <h3><i class="fas fa-share-alt"></i> Export & Sharing</h3>
                </div>
                
                <div class="export-grid">
                    <div class="export-option" onclick="exportToPDF()">
                        <div class="export-icon pdf">
                            <i class="fas fa-file-pdf"></i>
                        </div>
                        <div class="export-content">
                            <h4>Export to PDF</h4>
                            <p>Generate a comprehensive PDF report</p>
                        </div>
                    </div>
                    
                    <div class="export-option" onclick="exportToExcel()">
                        <div class="export-icon excel">
                            <i class="fas fa-file-excel"></i>
                        </div>
                        <div class="export-content">
                            <h4>Export to Excel</h4>
                            <p>Download data in Excel format</p>
                        </div>
                    </div>
                    
                    <div class="export-option" onclick="exportToCSV()">
                        <div class="export-icon csv">
                            <i class="fas fa-file-csv"></i>
                        </div>
                        <div class="export-content">
                            <h4>Export to CSV</h4>
                            <p>Download raw data as CSV file</p>
                        </div>
                    </div>
                    
                    <div class="export-option" onclick="exportToImage()">
                        <div class="export-icon image">
                            <i class="fas fa-image"></i>
                        </div>
                        <div class="export-content">
                            <h4>Export Charts as Images</h4>
                            <p>Save visualizations as PNG files</p>
                        </div>
                    </div>
                    
                    <div class="export-option" onclick="emailReport()">
                        <div class="export-icon email">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div class="export-content">
                            <h4>Email Report</h4>
                            <p>Send report to team members</p>
                        </div>
                    </div>
                    
                    <div class="export-option" onclick="scheduleReport()">
                        <div class="export-icon schedule">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div class="export-content">
                            <h4>Schedule Reports</h4>
                            <p>Automate report generation</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Notes & Insights Panel -->
            <section class="insights-section">
                <div class="section-header">
                    <h3><i class="fas fa-lightbulb"></i> Notes & Insights</h3>
                    <button class="btn-primary" onclick="addInsight()">
                        <i class="fas fa-plus"></i> Add Note
                    </button>
                </div>
                
                <div class="insights-content">
                    <div class="insights-tabs">
                        <button class="insight-tab active" data-tab="analyst" onclick="switchInsightTab('analyst')">
                            Analyst Comments
                        </button>
                        <button class="insight-tab" data-tab="ai" onclick="switchInsightTab('ai')">
                            AI Insights
                        </button>
                        <button class="insight-tab" data-tab="recommendations" onclick="switchInsightTab('recommendations')">
                            Recommendations
                        </button>
                    </div>
                    
                    <div class="insight-pane active" id="analystPane">
                        <div class="insights-list" id="analystComments">
                            <div class="insight-item" data-id="1">
                                <div class="insight-header">
                                    <div class="insight-author">
                                        <img src="https://via.placeholder.com/32x32/667eea/ffffff?text=JD" alt="John Doe" class="author-avatar">
                                        <div class="author-info">
                                            <strong>John Doe</strong>
                                            <span class="insight-time">2 hours ago</span>
                                        </div>
                                    </div>
                                    <div class="insight-actions">
                                        <button class="insight-action-btn" onclick="editInsight(1)">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="insight-action-btn" onclick="deleteInsight(1)">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="insight-content">
                                    <p>Q4 performance shows strong growth in enterprise segment. Conversion rates in North America region are 15% above target, suggesting effective sales strategies.</p>
                                </div>
                            </div>
                            
                            <div class="insight-item" data-id="2">
                                <div class="insight-header">
                                    <div class="insight-author">
                                        <img src="https://via.placeholder.com/32x32/28a745/ffffff?text=SJ" alt="Sarah Johnson" class="author-avatar">
                                        <div class="author-info">
                                            <strong>Sarah Johnson</strong>
                                            <span class="insight-time">Yesterday</span>
                                        </div>
                                    </div>
                                    <div class="insight-actions">
                                        <button class="insight-action-btn" onclick="editInsight(2)">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="insight-action-btn" onclick="deleteInsight(2)">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="insight-content">
                                    <p>Lead quality from LinkedIn campaigns has improved significantly. Cost per acquisition decreased by 22% while conversion rate increased by 8%.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="insight-pane" id="aiPane">
                        <div class="ai-insights">
                            <div class="ai-insight-item">
                                <div class="ai-icon">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <div class="ai-content">
                                    <h4>Pattern Detected</h4>
                                    <p>Deals with initial response time under 2 hours have 34% higher close rates.</p>
                                </div>
                            </div>
                            
                            <div class="ai-insight-item">
                                <div class="ai-icon">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div class="ai-content">
                                    <h4>Trend Analysis</h4>
                                    <p>Enterprise clients show 40% longer sales cycles but 3x higher average deal value.</p>
                                </div>
                            </div>
                            
                            <div class="ai-insight-item">
                                <div class="ai-icon">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <div class="ai-content">
                                    <h4>Risk Alert</h4>
                                    <p>Pipeline velocity has decreased by 12% in the last 30 days in the healthcare segment.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="insight-pane" id="recommendationsPane">
                        <div class="recommendations-list">
                            <div class="recommendation-item priority-high">
                                <div class="recommendation-priority">
                                    <i class="fas fa-exclamation-circle"></i>
                                    <span>High Priority</span>
                                </div>
                                <div class="recommendation-content">
                                    <h4>Focus on Enterprise Deals in Q1</h4>
                                    <p>Data shows enterprise deals have 67% higher success rates and 3x value. Allocate more resources to enterprise segment for Q1 2025.</p>
                                </div>
                            </div>
                            
                            <div class="recommendation-item priority-medium">
                                <div class="recommendation-priority">
                                    <i class="fas fa-info-circle"></i>
                                    <span>Medium Priority</span>
                                </div>
                                <div class="recommendation-content">
                                    <h4>Improve Response Time</h4>
                                    <p>Implement automated lead routing to reduce initial response time and increase conversion rates by estimated 15%.</p>
                                </div>
                            </div>
                            
                            <div class="recommendation-item priority-low">
                                <div class="recommendation-priority">
                                    <i class="fas fa-lightbulb"></i>
                                    <span>Optimization</span>
                                </div>
                                <div class="recommendation-content">
                                    <h4>Optimize LinkedIn Campaigns</h4>
                                    <p>LinkedIn generates highest quality leads. Consider increasing budget allocation by 25% for LinkedIn advertising.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        
        <!-- Sidebar Toggle Button -->
        <button class="sidebar-toggle-btn" onclick="toggleSidebar()">
            <i class="fas fa-bars"></i>
        </button>
    </div>

    <!-- Modals -->
    
    <!-- Add Insight Modal -->
    <div class="modal-overlay" id="addInsightModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="insightModalTitle">Add Analyst Comment</h3>
                <button class="modal-close" onclick="closeInsightModal()">×</button>
            </div>
            <div class="modal-body">
                <div class="field-group">
                    <label for="insightType">Type</label>
                    <select id="insightType" class="form-select">
                        <option value="observation">Observation</option>
                        <option value="trend">Trend Analysis</option>
                        <option value="recommendation">Recommendation</option>
                        <option value="concern">Concern/Risk</option>
                    </select>
                </div>
                <div class="field-group">
                    <label for="insightContent">Comment</label>
                    <textarea id="insightContent" class="form-textarea" rows="5" placeholder="Enter your insights..."></textarea>
                </div>
                <div class="field-group">
                    <label>
                        <input type="checkbox" id="shareInsight"> Share with team
                    </label>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn-primary" onclick="saveInsight()">Save Comment</button>
                <button class="btn-secondary" onclick="closeInsightModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Save Filter Preset Modal -->
    <div class="modal-overlay" id="savePresetModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Save Filter Preset</h3>
                <button class="modal-close" onclick="closeSavePresetModal()">×</button>
            </div>
            <div class="modal-body">
                <div class="field-group">
                    <label for="presetName">Preset Name</label>
                    <input type="text" id="presetName" class="form-input" placeholder="e.g., Q4 Enterprise Deals">
                </div>
                <div class="field-group">
                    <label for="presetDescription">Description (Optional)</label>
                    <textarea id="presetDescription" class="form-textarea" rows="3" placeholder="Describe what this filter preset shows..."></textarea>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn-primary" onclick="saveFilterPresetAction()">Save Preset</button>
                <button class="btn-secondary" onclick="closeSavePresetModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Email Report Modal -->
    <div class="modal-overlay" id="emailReportModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Email Report</h3>
                <button class="modal-close" onclick="closeEmailReportModal()">×</button>
            </div>
            <div class="modal-body">
                <div class="field-group">
                    <label for="emailRecipients">Recipients</label>
                    <input type="text" id="emailRecipients" class="form-input" placeholder="Enter email addresses separated by commas">
                </div>
                <div class="field-group">
                    <label for="emailSubject">Subject</label>
                    <input type="text" id="emailSubject" class="form-input" value="CRM Report - Monthly Sales Performance">
                </div>
                <div class="field-group">
                    <label for="emailMessage">Message</label>
                    <textarea id="emailMessage" class="form-textarea" rows="4" placeholder="Add a message to include with the report..."></textarea>
                </div>
                <div class="field-group">
                    <label>Include:</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" checked> Charts & Visualizations</label>
                        <label><input type="checkbox" checked> Data Table</label>
                        <label><input type="checkbox"> Raw Data (CSV)</label>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn-primary" onclick="sendEmailReport()">Send Report</button>
                <button class="btn-secondary" onclick="closeEmailReportModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Schedule Report Modal -->
    <div class="modal-overlay" id="scheduleReportModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Schedule Automatic Reports</h3>
                <button class="modal-close" onclick="closeScheduleReportModal()">×</button>
            </div>
            <div class="modal-body">
                <div class="field-group">
                    <label for="scheduleFrequency">Frequency</label>
                    <select id="scheduleFrequency" class="form-select">
                        <option value="daily">Daily</option>
                        <option value="weekly">Weekly</option>
                        <option value="monthly" selected>Monthly</option>
                        <option value="quarterly">Quarterly</option>
                    </select>
                </div>
                <div class="field-group">
                    <label for="scheduleDay">Day</label>
                    <select id="scheduleDay" class="form-select">
                        <option value="1">1st of the month</option>
                        <option value="15">15th of the month</option>
                        <option value="last">Last day of the month</option>
                    </select>
                </div>
                <div class="field-group">
                    <label for="scheduleTime">Time</label>
                    <input type="time" id="scheduleTime" class="form-input" value="09:00">
                </div>
                <div class="field-group">
                    <label for="scheduleRecipients">Recipients</label>
                    <input type="text" id="scheduleRecipients" class="form-input" placeholder="Enter email addresses">
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn-primary" onclick="saveSchedule()">Schedule Report</button>
                <button class="btn-secondary" onclick="closeScheduleReportModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal-overlay" id="deleteModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirm Deletion</h3>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this <span id="deleteType">item</span>?</p>
                <p><strong id="deleteItemName"></strong></p>
                <p class="warning-text">This action cannot be undone.</p>
            </div>
            <div class="modal-actions">
                <button class="btn-danger" onclick="confirmDelete()">Delete</button>
                <button class="btn-secondary" onclick="closeDeleteModal()">Cancel</button>
            </div>
        </div>
    </div>

    <script src="reports.js"></script>
</body>
</html>
